
program     : ((TAG)? (expr | assign_stmt | swap_stmt | if_stmt | while_stmt | print_stmt))*

assign_stmt : IDENTIFIER ("[" expr "]")? "=" (vector | expr)

swap_stmt   : "swap" IDENTIFIER ("[" expr "]")? IDENTIFIER ("[" expr "]")?

if_stmt     : "if" comparison "{" (program)* "}" ("else" "{" (program)* "}")?

while_stmt  : "while" comparison "{" (program)* "}"

print_stmt  : "print" comparison

comparison  : expr
            | expr "==" expr                -> eq
            | expr "!=" expr                -> neq
            | expr "<" expr                 -> lt
            | expr ">" expr                 -> gt

expr        : term
            | term "+" term                 -> add
            | term "-" term                 -> sub

term        : factor
            | factor "*" factor             -> mul
            | factor "/" factor             -> div

factor      : SIGNED_NUMBER                 -> number
            | IDENTIFIER ("[" expr "]")?    -> identifier
            | "True"                        -> true
            | "False"                       -> false
            | "(" expr ")"

vector      : "[" (expr ("," expr)*)? "]"

TAG         : "@" IDENTIFIER

COMMENT     : ("--" | "->") /[^\n]*/

%import common.CNAME -> IDENTIFIER
%import common.SIGNED_NUMBER
%import common.WS

%ignore WS
%ignore COMMENT
